<html>
<head>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
	<script src="designer.js"></script>
	<script src="characteristics.js"></script>
	<script src="tubes.js"></script>
	<link rel="stylesheet" href="designer.css"></link>
</head>
<body>
	<section id="container">
	<div id="designer">
	<h1 style="text-align: center;">Triode characteristics</h1>
	<div style="width: 600px; height: 500px;">
		<canvas id="mainChart"></canvas>
	</div>
	<div style="height: 10px;"></div>
	<div>Select a tube: <select name="tubes" id="tubeSelect" style="margin-left: 40px;" onchange="circuit.loadDevice(tubes, this.selectedIndex);"></select></div>
	<div style="height: 10px;"></div>
	<table>
		<tr>
			<th colspan="4">Circuit Parameters</th>
		</tr>
		<tr>
			<td width="30%"><span id="fLabel1">Field 1</span></td>
			<td width="20%"><input type="text" id="field1" onChange="circuit.updateParameters()" style="width: 100px"></td>
			<td width="30%"><span id="fLabel2">Field 2</span></td>
			<td width="20%"><input type="text" id="field2" onChange="circuit.updateParameters()" style="width: 100px"></td>
		</tr>
		<tr>
			<td><span id="fLabel3">Field 3</span></td>
			<td><input type="text" id="field3" onChange="circuit.updateParameters()" style="width: 100px"></td>
			<td><span id="fLabel4">Field 4</span></td>
			<td><input type="text" id="field4" onChange="circuit.updateParameters()" style="width: 100px"></td>
		</tr>
		<tr>
			<td><span id="fLabel5">Field 5</span></td>
			<td><input type="text" id="field5" onChange="circuit.updateParameters()" style="width: 100px"></td>
			<td><span id="fLabel6">Field 6</span></td>
			<td><input type="text" id="field6" onChange="circuit.updateParameters()" style="width: 100px"></td>
		</tr>
		<tr>
			<td><span id="fLabel7">Field 7</span></td>
			<td><input type="text" id="field7" onChange="circuit.updateParameters()" style="width: 100px"></td>
			<td><span id="fLabel8">Field 8</span></td>
			<td><input type="text" id="field8" onChange="circuit.updateParameters()" style="width: 100px"></td>
		</tr>
	</table>
	<button onclick="circuit.downloadJSON()">Download for Valve Workbench</button>
	</div>
	<div id="pentode">
	<h1 style="text-align: center;">Pentode Characteristics</h1>
	<div style="width: 600px; height: 500px;">
		<canvas id="pentodeChart"></canvas>
	</div>
	</div>
	</section>
	<script>
		const triodeChart = document.getElementById('mainChart');		
		const pentodeChart = document.getElementById('pentodeChart');	
		tubes = smallSignalTriodes.concat(smallSignalPentodes.concat(powerPentodes));
		circuit = new Characteristics(triodeChart, pentodeChart);
		circuit.configureParameters();
		circuit.buildTubeList(tubes);
		circuit.loadDevice(tubes, 0);
	</script>
</body>
</html>